function [y1] = Fcn_Red_Qr_5(x1)
%FCN_RED_QR_5 neural network simulation function.
%
% Auto-generated by MATLAB, 06-Sep-2021 10:49:57.
% 
% [y1] = Fcn_Red_Qr_5(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-116.063060960018;-116.229534617895];
x1_step1.gain = [0.00861222819736077;0.00860324037730651];
x1_step1.ymin = -1;

% Layer 1
b1 = [-5.7470538989736512647;5.4208115472580500338;4.1247591276069659472;-3.6658530791890227007;-3.5237247202866064377;-3.0744929390316566575;-1.9201137642653642867;-1.7999456572461689507;0.54325626040459074062;-0.64964445170223794612;0.57996045828787301524;-1.4857573876375647082;1.8191206974034919153;3.3575453188434356555;-2.8875066743846411477;-1.9554335263483118013;3.4994586366448232617;4.3886692760354923948;-5.2008452017499484654;-5.9953994233313157025];
IW1_1 = [0.34682146984758022157 -5.4847294369192507446;-2.9744600116238828491 5.8458478180655264467;-1.0512935140403854017 -6.198593795413440688;4.2912160825065095437 5.0864654245517968434;4.9976947549950150318 -2.4743068980230233933;5.7505641449980346991 -2.7829311040345392492;4.716230656636062335 -3.0087770688706809707;5.8768951215475286887 0.77314134482253893399;-4.4596326539219086627 -2.173781902115932585;2.8064146050467102533 -5.032154685464904631;1.3807466083043655747 6.0527358360660237224;0.15773119235147783912 -5.1771691110570685623;3.0511261800675906208 4.6683604377529510643;4.9179451632033153174 3.316125561606800165;-5.4327599203996213006 0.59872697797275908904;-3.5238130469324744354 3.4223790762511256958;1.5127100552887418061 5.2735548079156506773;4.633072310483762557 -5.3532209149165144169;-3.1661320010997253682 5.2681749182946742138;0.161099761713818318 6.0954850647632552452];

% Layer 2
b2 = [-1.6892467958554286955;1.5317552378477716779;0.81083855128973181259;1.196742567342110819;-1.9150494166195666246;-1.1492724560340557005;0.44958741144663333378;-0.28482765657860176223;-0.086293014183846217247;-0.02102762125933727716;0.21101035406023518903;0.70653470204150414791;0.24044083259214812931;0.77325681872346718748;0.58519631546068073824;0.94227918330932103341;0.44273135642779237742;1.4601517446872611661;-2.4215569269832828425;1.6890034378486087352];
LW2_1 = [0.15262102605195801419 0.030074185092001513853 -0.62513327496214554646 -0.36198693576867874144 0.30989579411319762015 -0.029224743792793224373 0.2950431193842145694 -0.042894021362857651103 0.24774714326908153783 0.55011144728596017561 -0.72193845295426795072 -0.30299045876893404561 0.15571060086567029002 -0.24483208353085481046 -0.14592362352703516781 -0.27814288879638882079 -0.55212779306487558273 -0.37156505748754392604 0.33653687349730876388 0.32476632308005976002;-0.62262706110818433203 -0.42134331134508801187 0.54295378256994963895 0.36976466525753504122 -0.68368843988655647603 -0.66363199197240108074 0.05114500124433865591 0.12180800138574096603 0.58133270640881851143 0.1290638946813752741 0.014593676905217643769 0.16843405534078434438 0.10364703548795195509 -0.23242116406273818918 0.2390996231541517858 -1.2255198054066991364 -0.063003928298965353183 -0.42203766477631499132 -0.20028515604255470173 -0.37658424741503504496;-0.3084384100238776738 0.13225363631545422605 -0.43331404752435409566 0.090129141417070277043 -0.13288759132724398127 -1.6941287898123793543 -0.67865522065795347295 -0.53688066664533751204 -0.73614885132912621923 0.022498804243649136309 -0.46857791053086128574 -0.96344519253827221039 1.8178701617584587247 -0.32247260438991554032 -0.67225031602843554612 -0.61498655576000982315 -0.42234390051281278655 -0.74136696951721547943 0.47631098252758735656 0.7096023118571388455;0.14703079696404156018 0.14669248935764325759 -0.8112469878117314348 -0.026574460641408812617 -0.19325664746492732249 0.1227377085692862857 0.82310681795612550271 1.0733647293684174251 0.94902398195530490721 -0.62747726346240573214 0.026519930954687208347 0.52858858252103990694 0.30505811102256080725 0.90180191024700728786 -0.057311685634041042992 0.55489847807508796418 -0.51173540914495330156 -0.10784416218753900552 -0.13666187206491939299 -0.53413654056487303023;0.56655430028105935314 -0.47709349538211848207 -0.058487330352951574786 0.70292047750076591672 0.14932047017772864805 -0.015132914141946965381 -0.7840610594254908694 -0.89588729006341527583 1.2845060376078560882 0.28606583412536618072 -0.59690743675852619976 -0.25129485015801367176 1.6036071695400944126 -0.42540505633426572984 -0.22667786982961213305 -0.80118060025273651892 0.79907803066161997574 0.42509563517526355314 0.061805532598078652406 0.78615818383812108294;0.4784851053153310052 0.83113061195582560448 0.25163183672860833795 1.0645686675011509781 -0.8161424323768609046 0.45788507407114764636 -0.33710338929784222639 0.50379415191763465831 0.96349717561955061651 -0.26377461245552874525 -0.67044469401787487595 -0.24226192728444076452 0.068572549888367625992 1.0155978646231424989 0.61086768004924829611 0.03855056873015529767 0.15008953296246799192 0.66038478480944606819 0.0041549246407146817744 0.25286423605378327562;-0.45413469268955314329 -0.078646456292781580233 -0.53701311089800973786 -0.762824159717514938 1.1273966269196544765 0.089787157109662854571 -0.87063925249229767722 0.078989535706595226383 0.29570474301956822805 0.078878799962953327629 0.62822978572112786466 -0.1026174919130540264 -0.1044151293021839122 0.19063511765450191771 -0.58816250777627820945 -0.054935606639304135346 -0.095265721720103613279 0.10998735053775793302 -0.071044129557183199886 0.066810060549017280529;0.23116094892954422435 -0.025930883284650214915 0.91522770669917086206 0.18786977367700280483 0.34781088305929358517 -0.80410268149028141238 0.16844262829253969782 -0.41044905990070179591 0.31760352312890643978 -0.59643126907151611249 0.29679165449376176955 -0.58192366677370432893 0.85499583512411836406 -0.68415008232577079195 -0.7969749472347134045 -0.21508825982816343059 -1.0452970319918422071 -0.82790433583903932924 0.26723413942201063032 -0.65909839209424025963;0.26276553416114362127 0.57920879134333347338 0.54376603586182548078 -0.35461834463090941005 0.073541540268865279728 0.17046595637704822779 0.68226846238843552594 0.27011208682280019033 0.046814632583683103706 0.21117779260499308647 -0.37335873499289606858 0.40792846361897905361 0.11572543875800089808 1.10144707164764033 0.49584350300068535944 0.3216129848942299585 0.11860505285089802119 -0.31621706465300541966 0.080245306912962610646 -0.12464202439961458158;-0.063860437288184634941 -0.58894246210285983167 -0.4667447361488022417 0.25556879290923734116 0.21770922188299957067 0.27364932620395227003 0.34288909129050598734 0.23244489053931663425 -0.30042816284162471296 -0.86322067347884756661 0.28741722317477375048 0.51831089244957717632 -0.22975285478722776156 -0.45336884437296037786 0.38972794231685703448 0.38119611621938215285 -0.16940385901045793005 -0.55610704696317403428 -0.21856191831742435849 0.014877011152175307826;-0.59295083261333747515 -0.18165140942464347296 0.7776934526032490691 -0.89536513615613699812 -0.091084911254169065309 0.27885037326158451654 -0.2217068300234784628 -0.62284281875024694042 0.54212030926275101006 0.53980860595408108882 0.1913975328327754688 0.11887742033694646826 -1.2745398713397553259 -0.94964575921683236359 0.91379889656943380505 -1.5352754190190551764 0.32779037275292977061 0.8763001388026223637 0.45358313564446595123 -0.5191130971326385346;-0.36762591771979252764 -0.31091115137831099036 -0.061023997672821884974 -0.83391520043191780243 0.1801470563971493688 -1.2919637636637897327 -0.84810927144562198166 0.32038041102624315037 0.085193914336602269421 0.070177069310267431446 0.23058458922133595603 0.18587358389660638136 -0.63676184427886839412 0.4418631207242010861 -0.67474320859681846674 -0.15363794050411089254 0.74163751306841352307 -0.32436767202234423335 0.137742203567612298 -0.43410639125491035095;0.6701611481033961093 0.25759023010388937269 -0.2346997302697145793 0.6349589871789326212 -0.43441085122921863082 -0.65843127414150004473 0.11859622477446410405 0.1335553996090518003 -0.34787066631412183471 0.70986115170099173266 0.25780109532241429759 -0.69885938053574614415 -0.42430076727065441089 -0.81769127370440419789 -0.43015841650522790296 -0.15468851746558273663 0.63732414717726382225 -0.83254857519031244539 0.064923730832614476305 -0.040821963082725003236;0.26434804899663033595 -0.42942512217503864269 0.43531282424564959888 -0.26435938240169071234 -0.40255876245095861821 0.20693295891942650733 0.4541403305504173038 0.12935859958646017676 -0.21893426702338886214 -0.15512298338832877787 0.36609471150678046802 0.24978431716200799606 -0.78513995140392944805 0.026902375942611578274 0.58341073560159051326 -0.53134719700224519734 0.026314112662017420663 1.2719837183545124049 0.16019875810450584508 -0.002076283859310434389;0.15615064381596127641 0.32101601623129738527 -0.592324754876141224 -0.0055967088278256887923 -0.54051110221627518548 -0.1928629563293247362 0.21740351745739863731 -0.15737562433619103897 0.13507447552032342264 -0.77650004526675975303 -0.32355459889182730526 0.72024882532569134419 0.3695484476822222808 -1.0316173104997499177 -0.31876922348174280275 0.41040250036184428017 -0.4715171504899067223 0.68285758390380613125 -0.079582304872757483882 0.34080303704982112256;0.49476424391311085715 0.11744843676003460797 0.60644183083531344458 -0.73049315657490931919 0.57223715156769283663 0.019205054605450400801 0.99545549040105529848 -0.051104104583938964046 -0.71032537546764362713 0.025306781247699056125 -0.20482548873613196094 -1.0621398021528007938 -0.10691464043551303364 0.31598993467651076417 0.45375361200206371093 -1.1749415611948843541 0.30892862683168403892 -0.80769093690271476227 0.11871625362067378395 0.51218327992762002765;-0.099600454276101327289 -0.39401541617233526438 0.78630353193263435863 0.33954662791803497113 0.21883200076827785674 -0.18880839170713664688 -0.50367258062714015399 -0.38013348027200671853 0.035762327813580081781 -0.40135263954604122327 0.22896448571219504831 1.4101106352084795681 -0.74360737559762835058 -1.1521155158715319367 1.0306924242511785739 1.9014926360737085531 0.25414696069100706222 1.2764929792177084344 0.36466900749246744518 0.55421384232379367063;0.49437279242777903976 0.49469266254329030685 0.022361755566310002885 0.22887611577348573877 -0.27458737969711005666 -0.30224318538354527641 -0.26314740549931098235 -0.24952472785368168262 0.046966432515242559353 0.53708839168731759006 -0.27918956445460973992 -0.16487617691013317645 -0.72888129156948477938 -0.21766869526658791378 -1.201664030743687217 -0.5875606902248362573 0.36574513114793560931 -0.62918787415720711653 0.18248322567835642549 -0.24476958805586596091;-0.19227682450829911009 -0.48340135159452701785 0.18886399448983048899 0.15270943260077146642 -1.566733709373792971 -0.099433727723851700331 1.3099519900897271807 0.36596000953813445644 -0.62259459777468650898 -0.77279190270560182974 -0.36586130120159465751 -0.12148956631954842267 0.32538076758057732363 1.031785631433293382 0.82994848473777793618 -0.49851831496976900526 -0.18351561888931761102 -0.21793400725771763793 -0.14941426215111427989 0.23185218368204127404;0.234711391643314643 0.76656651136881570618 0.2845691944819250252 -0.62370753492177144484 -0.22592117360002711424 0.81451015809453852778 0.75480025176076992466 0.54075813562967744996 -0.046579773198785735799 0.14251998142695454508 -0.77993198726838686152 0.71236872335030665404 -0.20960171037399463745 0.28038114220182092096 0.48541410664448680912 -0.47564292758138887462 1.1692462920665285253 -0.36659222525158130512 -0.019864407600338376825 0.26243983412590871085];

% Layer 3
b3 = 0.11581702649851187414;
LW3_2 = [-0.37573569697682807078 -0.47655049131131194118 1.3259673493629218211 0.55790534832184557335 1.4165394569978362327 -0.48049504484622335143 -1.4678967478840898586 -0.48434639077111718564 -1.2700604378598585598 -0.53022162399989736237 1.0454190206765647808 -1.3884275202429054996 -0.34600994407835994338 0.1256080889481824836 -0.87250293959954672296 -0.60043373501493613187 -1.299782530896441024 -0.60310498629774056401 -1.7336425478998915839 1.1464684417503883118];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.382528974555994;
y1_step1.xoffset = -2.61075848464239;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
